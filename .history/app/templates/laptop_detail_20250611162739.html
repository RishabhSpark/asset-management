<!DOCTYPE html>
<html>
  <head>
    <title>Laptop Details</title>
  </head>
  <body>
    <h1>Laptop Details</h1>
    {% if error %}
    <p style="color: red">{{ error }}</p>
    {% endif %} {% if laptop %}
    <p><b>Model:</b> {{ laptop.laptop_model }}</p>
    <p><b>Serial Number:</b> {{ laptop.laptop_serial_number }}</p>
    <p><b>Processor:</b> {{ laptop.processor }}</p>
    <p><b>RAM:</b> {{ laptop.ram }}</p>
    <p><b>Storage:</b> {{ laptop.storage }}</p>
    <p><b>Color:</b> {{ laptop.model_color }}</p>
    <p><b>Screen Size:</b> {{ laptop.screen_size }}</p>
    <p><b>OS:</b> {{ laptop.laptop_os }}</p>
    <p><b>OS Version:</b> {{ laptop.laptop_os_version }}</p>
    <p><b>Warranty Duration:</b> {{ laptop.warranty_duration }}</p>
    <p><b>Warranty Expiry:</b> {{ laptop.warranty_expiry or 'N/A' }}</p>
    <p><b>Price:</b> {{ laptop.laptop_price }}</p>
    <p><b>Created At:</b> {{ laptop.created_at }}</p>
    <p>
      <b>Status:</b> {% if laptop.is_retired %}Retired/Disposed{% else
      %}Active{% endif %}
    </p>
    <form
      method="post"
      action="{{ url_for('retire_laptop', laptop_id=laptop.id) }}"
      style="display: inline"
    >
      {% if not laptop.is_retired %}
      <input type="submit" value="Retire/Dispose" />
      {% endif %}
    </form>
    <h2>Assignment History</h2>
    <ul>
      {% for assignment in assignments %}
      <li>
        Assigned to User ID: {{ assignment.user_id }} {% if assignment.user %}
        ({{ assignment.user.name }} - {{ assignment.user.email }}){% endif %}
        <br />Assigned at: {{ assignment.assigned_at }} {% if
        assignment.unassigned_at %}<br />Unassigned at: {{
        assignment.unassigned_at }}{% endif %}
      </li>
      {% else %}
      <li>No assignments found.</li>
      {% endfor %}
    </ul>
    <h2>Maintenance Logs</h2>
    <ul>
      {% for log in laptop.maintenance_logs %}
      <li>
        <b>Date:</b> {{ log.date }}<br />
        <b>Description:</b> {{ log.description }}<br />
        <b>Performed By:</b> {{ log.performed_by }}
      </li>
      {% else %}
      <li>No maintenance logs found.</li>
      {% endfor %}
    </ul>
    <a href="{{ url_for('add_maintenance_log', laptop_id=laptop.id) }}"
      >Add Maintenance Log</a
    >
    {% else %}
    <p>Laptop not found.</p>
    {% endif %}
    <a href="{{ url_for('list_laptops') }}">Back to Laptops</a>
  </body>
</html>
